<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<style>
    body {
        font-family: Arial, sans-serif;
    }

    form {
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    label {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin-bottom: 10px;
    }

    input[type="text"] {
        padding: 5px;
        border: 1px solid #ccc;
        border-radius: 5px;
        margin-left: 5px;
    }

    button[type="button"] {
        padding: 10px 20px;
        background-color: #4CAF50;
        color: #fff;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        margin-top: 20px;
    }

    button[type="button"]:hover {
        background-color: #3e8e41;
    }
</style>
<body>
<form method="POST" id="frmForm" name="frmForm">
    <table>
        <thead>
        <tr>
            <th>이름</th>
            <th>혈당</th>
            <th>공복여부</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>송다운</td>
            <td><input type="text" name="song" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1')"></td>
            <td><input type="radio" class="isEmptyStomach" name="isEmptyStomach" title="공복여부" value="Y" id="song">공복</td>
        </tr>
        <tr>
            <td>오동준</td>
            <td><input type="text" name="oh" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1')"></td>
            <td><input type="radio" class="isEmptyStomach" name="isEmptyStomach" title="공복여부" value="Y" id="oh">공복</td>
        </tr>
        <tr>
            <td>이용호</td>
            <td><input type="text" name="lee" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1')"></td>
            <td><input type="radio" class="isEmptyStomach" name="isEmptyStomach" title="공복여부" value="Y" id="lee">공복</td>
        </tr>
        <tr>
            <td>강수림</td>
            <td><input type="text" name="kang" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1')"></td>
            <td><input type="radio" class="isEmptyStomach" name="isEmptyStomach" title="공복여부" value="Y" id="kang">공복</td>
        </tr>
        </tbody>
    </table>
    <button type="button" id="save_button">혈당 체크</button>
    <button type="button" id="list_button">목록</button>
</form>
</body>
</html>
<script>
    document.getElementById("save_button").addEventListener("click", () => {
        if(document.querySelector("input[name='song']").value.length === 0) {
            alert("다운쒸 혈당 입력해주세요.")
            return false
        }
        if(document.querySelector("input[name='oh']").value.length === 0) {
            alert("동준씨 혈당 입력해주세요.")
            return false;
        }
        if(document.querySelector("input[name='lee']").value.length === 0) {
            alert("용호씨 혈당 입력해주세요.")
            return false;
        }
        if(document.querySelector("input[name='kang']").value.length === 0) {
            alert("수림씨 혈당 입력해주세요.")
            return false;
        }
        let formData = new FormData(document.getElementById("frmForm"))
            document.querySelectorAll(".isEmptyStomach").forEach(tag => {
                tag.addEventListener("click", () => {
                    formData.append("isEmptyStomach", tag.value);
                })
            })


        fetch('/blood/save', {
            method: 'POST',
            body: formData

        })
            .then(response => response.json())
            .then(data => {
                if(data.code === 200) {
                    alert("저장!")
                    location.href = '/blood/list'
                }
            })
            .catch(error => {
                console.error(error);
            });
    })

    document.getElementById("list_button").addEventListener("click", () => {
        location.href = '/blood/list';
    })
</script>